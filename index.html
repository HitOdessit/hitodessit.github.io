
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Modern Android development for phones, tablets and wearables</title>
  <meta name="author" content="Android-Dev.mobi">

  
  <meta name="description" content="Problem statement: Assemble both mobile and wearable apps with the same RushORM database (.db file) with some predefined data in it, which will be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://android-dev.mobi">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Modern Android development for phones, tablets and wearables" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63303522-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Modern Android development for phones, tablets and wearables</a></h1>
  
    <h2>Personal blog of a small team of Android engineers who believe that Android development should be very simple, fast and reliable.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/17/rushorm-using-predefined-database-on-both-mobile-and-wear-apps/">[RushORM] Using Predefined Database on Both Mobile and Wear Apps</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-05-17T16:31:37+03:00" pubdate data-updated="true">May 17th, 2015</time>
        
           | <a href="/blog/2015/05/17/rushorm-using-predefined-database-on-both-mobile-and-wear-apps/#disqus_thread"
             data-disqus-identifier="http://android-dev.mobi/blog/2015/05/17/rushorm-using-predefined-database-on-both-mobile-and-wear-apps/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Problem statement:</p>

<blockquote><p>Assemble both mobile and wearable apps with the same RushORM database (.db file) with some predefined data in it, which will be absolutely the same for mobile and wear apps.</p></blockquote>

<p>While developing one of our apps, we were needed to ship both mobile and wear apps with the same set of “predefined” (pre-populated) data. However, user should be able to modify this data, add new or delete existed.</p>

<p>Using Android’s Framework <code>res</code> folder seems like not an option, because we can’t modify it’s content at runtime. Another idea is to upload that “predefined” data to some server, lets say in JSON format, download it during first app launch and store it in RushORM database using <code>RushCore.getInstance().deserialize(jsonString)</code> API. This may seems like a nice option, but it introduces few dependencies which we don’t want to have in our apps, like:</p>

<ul>
<li>Internet connection is required during first app start.</li>
<li>Downloading, parsing and storing data into database increase first startup time, therefore worsens user experience.</li>
<li>Some server is required, however it could be simply Dropbox with publicly shared files.</li>
<li>Some script is required to upload generated files to remote server, and also to download these files from server to Android device.</li>
</ul>


<p>We didn’t want to have any of the above dependencies and drawbacks in our app, so we come up with another solution: </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/05/17/rushorm-using-predefined-database-on-both-mobile-and-wear-apps/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/06/wear-avoid-system-timeout-to-close-the-activity/">[Wear] Avoid System Timeout to Close the Activity</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-05-06T12:57:34+03:00" pubdate data-updated="true">May 6th, 2015</time>
        
           | <a href="/blog/2015/05/06/wear-avoid-system-timeout-to-close-the-activity/#disqus_thread"
             data-disqus-identifier="http://android-dev.mobi/blog/2015/05/06/wear-avoid-system-timeout-to-close-the-activity/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Interestingly, by default Android Wear close the application activity after 30 seconds of idle.
It means that Google wants Wear apps be “lightweight” -  designed to work in short-time interaction with user.</p>

<p>But still Android is Android :) Here you can avoid almost everything.</p>

<p>Just add <code>android:keepScreenOn="true"</code> to your activities root view XML and timeout will be dismissed.</p>

<p>Alternatively, you can <a href="https://developer.android.com/training/scheduling/wakelock.html#screen">set same flag at runtime from Java code</a>
like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>        <span class="n">getWindow</span><span class="o">().</span><span class="na">addFlags</span><span class="o">(</span><span class="n">WindowManager</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">.</span><span class="na">FLAG_KEEP_SCREEN_ON</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Do not abuse this option, because it may drain battery of users wearables!</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/04/30/realm-first-look-into-brand-new-mobile-persistant-storage/">[Realm] First Look Into Brand New Mobile Persistant Storage</a></h1>
    
    
      <p class="meta">
        








  



<time datetime="2015-04-30T17:32:55+03:00" pubdate data-updated="true">Apr 30th, 2015</time>
        
           | <a href="/blog/2015/04/30/realm-first-look-into-brand-new-mobile-persistant-storage/#disqus_thread"
             data-disqus-identifier="http://android-dev.mobi/blog/2015/04/30/realm-first-look-into-brand-new-mobile-persistant-storage/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Starting new project we spent some time investigating new approaches for data persistant storage on Android Platform.</p>

<p>One of the newest and the most promising library everybody is talking about is <a href="http://realm.io">Realm</a>.
This is noSQL, non-relational storage written on C++ for Android and iOS platforms which promise very handy and fast object-oriented access to local storage.</p>

<p>What can be better that writing something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='Java'><span class='line'><span class="n">realm</span><span class="o">.</span><span class="na">beginTransaction</span><span class="o">();</span>
</span><span class='line'><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">realm</span><span class="o">.</span><span class="na">createObject</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// Create a new object</span>
</span><span class='line'><span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">user</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&quot;john@corporation.com&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">realm</span><span class="o">.</span><span class="na">commitTransaction</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>and store your business object into storage without any mapping, SQL, and other complicated and potentially slow operations inside?</p>

<p>The first impression was - “wow, it’s awesome!”.
It’s easy to integrate, pretty good documentation available, also samples, videos, community.</p>

<p>But deeper dive showed shocking drawbacks: </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/04/30/realm-first-look-into-brand-new-mobile-persistant-storage/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
   
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:android-dev.mobi" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/05/17/rushorm-using-predefined-database-on-both-mobile-and-wear-apps/">[RushORM] Using Predefined Database on Both Mobile and Wear Apps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/06/wear-avoid-system-timeout-to-close-the-activity/">[Wear] Avoid System Timeout to Close the Activity</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/30/realm-first-look-into-brand-new-mobile-persistant-storage/">[Realm] First Look Into Brand New Mobile Persistant Storage</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Android-Dev.mobi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'androiddevmobi';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
    var stickyNavTop = $('nav').offset().top;  
      
    var stickyNav = function(){  
      var scrollTop = $(window).scrollTop(); 
      var navHasClassSticky = $('nav').hasClass('sticky');

      if (scrollTop > stickyNavTop && navHasClassSticky) {   
        return true;
      } else if (scrollTop > stickyNavTop) {
        $('nav').hide();
        $('nav').addClass('sticky');
        $('nav').fadeIn('2000');
      } else {  
        $('nav').removeClass('sticky');   
      }  
    };  
      
    stickyNav();  
      
    $(window).scroll(function() {  
      stickyNav();  
    });  
  });  
</script>


</body>
</html>
